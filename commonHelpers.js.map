{"version":3,"file":"commonHelpers.js","sources":["../src/js/01-timer.js"],"sourcesContent":["// Opisany w dokumentacji\nimport flatpickr from \"flatpickr\";\n// Dodatkowy import stylów\nimport \"flatpickr/dist/flatpickr.min.css\";\n// Opisany w dokumentacji\nimport iziToast from \"izitoast\";\n// Kolejny import stylów\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst button = document.querySelector(\"button[data-start]\")\nconst input = document.getElementById(\"datetime-picker\")\nconst days = document.querySelector(\"span[data-days]\")\nconst hours = document.querySelector(\"span[data-hours]\")\nconst minutes = document.querySelector(\"span[data-minutes]\")\nconst seconds = document.querySelector(\"span[data-seconds]\")\nlet userSelectedDate;\nlet timerActive = false;\n\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n      if (selectedDates.length > 0) {\n        userSelectedDate = selectedDates[0];\n        let userSelectedDateTimestamp = userSelectedDate.getTime();\n        let dateNow = Date.now();\n\n        if (userSelectedDateTimestamp <= dateNow) {\n          iziToast.error({\n            message: 'Please choose a date in the future',\n            position: 'topRight',\n            zindex: '999',\n            close: '',\n            closeOnClick: 'true'\n        });\n            button.disabled = true;\n        } else {\n            button.disabled = false;\n        }\n        console.log(userSelectedDate);\n      }\n    },\n};\n  \n  flatpickr(input, options);\n\n  button.addEventListener('click', () => {\n  if (userSelectedDate && !timerActive) {\n    timerActive = true;\n    button.disabled = true;\n    input.disabled = true;\n    startCountdown(userSelectedDate);\n  }\n});\n\nfunction startCountdown(targetDate) {\n    const interval = setInterval(() => {\n        const now = new Date().getTime();\n        const distance = targetDate.getTime() - now;\n\n        const d = Math.floor(distance / (1000 * 60 * 60 * 24));\n        const h = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n        const m = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));\n        const s = Math.floor((distance % (1000 * 60)) / 1000);\n\n        days.innerHTML = d < 10 ? '0' + d : d;\n        hours.innerHTML = h < 10 ? '0' + h : h;\n        minutes.innerHTML = m < 10 ? '0' + m : m;\n        seconds.innerHTML = s < 10 ? '0' + s : s;\n\n        if(distance <= 1000) {\n          clearInterval(interval);\n          timerActive = false;\n          input.disabled = false;\n          flatpickr(input, options);\n        }\n\n    }, 1000);\n}\n\nfunction addLeadingZero(value) {\n  return value.toString().padStart(2, '0');\n}"],"names":["button","input","days","hours","minutes","seconds","userSelectedDate","timerActive","options","selectedDates","userSelectedDateTimestamp","dateNow","iziToast","flatpickr","startCountdown","targetDate","interval","now","distance","d","h","m","s"],"mappings":"2GAUA,MAAMA,EAAS,SAAS,cAAc,oBAAoB,EACpDC,EAAQ,SAAS,eAAe,iBAAiB,EACjDC,EAAO,SAAS,cAAc,iBAAiB,EAC/CC,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAU,SAAS,cAAc,oBAAoB,EACrDC,EAAU,SAAS,cAAc,oBAAoB,EAC3D,IAAIC,EACAC,EAAc,GAGlB,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,GAAIA,EAAc,OAAS,EAAG,CAC5BH,EAAmBG,EAAc,CAAC,EAClC,IAAIC,EAA4BJ,EAAiB,UAC7CK,EAAU,KAAK,MAEfD,GAA6BC,GAC/BC,EAAS,MAAM,CACb,QAAS,qCACT,SAAU,WACV,OAAQ,MACR,MAAO,GACP,aAAc,MAC1B,CAAS,EACGZ,EAAO,SAAW,IAElBA,EAAO,SAAW,GAEtB,QAAQ,IAAIM,CAAgB,CAC7B,CACF,CACL,EAEEO,EAAUZ,EAAOO,CAAO,EAExBR,EAAO,iBAAiB,QAAS,IAAM,CACnCM,GAAoB,CAACC,IACvBA,EAAc,GACdP,EAAO,SAAW,GAClBC,EAAM,SAAW,GACjBa,EAAeR,CAAgB,EAEnC,CAAC,EAED,SAASQ,EAAeC,EAAY,CAChC,MAAMC,EAAW,YAAY,IAAM,CAC/B,MAAMC,EAAM,IAAI,KAAM,EAAC,QAAO,EACxBC,EAAWH,EAAW,QAAO,EAAKE,EAElCE,EAAI,KAAK,MAAMD,GAAY,IAAO,GAAK,GAAK,GAAG,EAC/CE,EAAI,KAAK,MAAOF,GAAY,IAAO,GAAK,GAAK,KAAQ,IAAO,GAAK,GAAG,EACpEG,EAAI,KAAK,MAAOH,GAAY,IAAO,GAAK,KAAQ,IAAO,GAAG,EAC1DI,EAAI,KAAK,MAAOJ,GAAY,IAAO,IAAO,GAAI,EAEpDhB,EAAK,UAAYiB,EAAI,GAAK,IAAMA,EAAIA,EACpChB,EAAM,UAAYiB,EAAI,GAAK,IAAMA,EAAIA,EACrChB,EAAQ,UAAYiB,EAAI,GAAK,IAAMA,EAAIA,EACvChB,EAAQ,UAAYiB,EAAI,GAAK,IAAMA,EAAIA,EAEpCJ,GAAY,MACb,cAAcF,CAAQ,EACtBT,EAAc,GACdN,EAAM,SAAW,GACjBY,EAAUZ,EAAOO,CAAO,EAG7B,EAAE,GAAI,CACX"}